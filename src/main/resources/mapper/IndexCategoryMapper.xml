<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.zhu.tcomadminapi.mapper.IndexCategoryMapper">

    <!-- 插入分类 -->
    <insert id="insert" parameterType="top.zhu.tcomadminapi.model.entity.IndexCategory">
        INSERT INTO t_index_category (name, parent_id, level, is_show, sort, type, create_time, update_time)
        VALUES (#{name}, #{parentId}, #{level}, #{isShow}, #{sort}, #{type}, #{createTime}, #{updateTime})
    </insert>

    <!-- 根据 ID 查询分类 -->
    <select id="selectById" resultType="top.zhu.tcomadminapi.model.entity.IndexCategory">
        SELECT pk_id AS pkId, name, parent_id AS parentId, level, is_show AS isShow,
               sort, type, create_time AS createTime, update_time AS updateTime
        FROM t_index_category
        WHERE pk_id = #{pkId}
    </select>

    <!-- 查询所有分类 -->
    <select id="selectList" resultType="top.zhu.tcomadminapi.model.entity.IndexCategory">
        SELECT pk_id AS pkId, name, parent_id AS parentId, level, is_show AS isShow,
               sort, type, create_time AS createTime, update_time AS updateTime
        FROM t_index_category
    </select>

    <!-- 根据 ID 更新分类 -->
    <update id="updateById" parameterType="top.zhu.tcomadminapi.model.entity.IndexCategory">
        UPDATE t_index_category
        SET name = #{name},
            parent_id = #{parentId},
            level = #{level},
            is_show = #{isShow},
            sort = #{sort},
            type = #{type},
            update_time = #{updateTime}
        WHERE pk_id = #{pkId}
    </update>

    <!-- 根据 ID 删除分类 -->
    <delete id="deleteById" parameterType="Long">
        DELETE FROM t_index_category
        WHERE pk_id = #{pkId}
    </delete>

    <!-- 根据分类 ID 查询关联的首页内容 -->
    <select id="existsByCategoryId" resultType="boolean">
        SELECT COUNT(*) > 0
        FROM t_index_content
        WHERE category_id = #{categoryId}
    </select>

</mapper>
